<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamSync - Rüya Paylaşım ve Analiz</title>
    <meta name="description" content="Rüyalarınızı kaydedin, yapay zeka ile analiz edin ve toplulukla paylaşın">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1e40af">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dream: {
                            primary: '#1e40af',      // Parliament blue
                            secondary: '#3b82f6',    // Bright blue
                            accent: '#0ea5e9',       // Sky blue
                            dark: '#1e3a8a',         // Dark parliament blue
                            light: '#dbeafe',        // Light blue
                            gradient: {
                                from: '#1e40af',
                                via: '#3b82f6', 
                                to: '#0ea5e9'
                            }
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                        'fadeIn': 'fadeIn 0.3s ease-in-out',
                        'slideDown': 'slideDown 0.3s ease-out',
                        'bounce-gentle': 'bounce-gentle 3s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'rotate-slow': 'rotate-slow 8s linear infinite',
                        'ai-pulse': 'ai-pulse 2s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideDown: {
                            '0%': { transform: 'translateY(-10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        'bounce-gentle': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px rgba(30, 64, 175, 0.4)' },
                            '100%': { boxShadow: '0 0 20px rgba(30, 64, 175, 0.8), 0 0 30px rgba(59, 130, 246, 0.4)' },
                        },
                        'rotate-slow': {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' },
                        },
                        'ai-pulse': {
                            '0%, 100%': { 
                                transform: 'scale(1)',
                                filter: 'brightness(1)'
                            },
                            '50%': { 
                                transform: 'scale(1.1)',
                                filter: 'brightness(1.2)'
                            },
                        },
                    },
                    boxShadow: {
                        'dream': '0 4px 14px 0 rgba(101, 119, 247, 0.2)',
                    },
                    backgroundImage: {
                        'dream-gradient': 'linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #0ea5e9 100%)',
                        'dream-gradient-dark': 'linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%)',
                        'dream-radial': 'radial-gradient(circle at center, #3b82f6, #1e40af)',
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
        }
        
        .bg-stars {
            background-color: #0f172a;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(30, 64, 175, 0.1) 0%, transparent 50%),
                radial-gradient(white, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 300px 300px, 400px 400px, 50px 50px;
        }
        
        .dream-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(30, 64, 175, 0.1);
            transition: all 0.3s ease;
        }
        
        .dark .dream-card {
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .dream-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(30, 64, 175, 0.15), 0 4px 12px rgba(59, 130, 246, 0.1);
        }
        
        .dark .dream-card:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(59, 130, 246, 0.2);
        }
        
        .shimmer {
            background: linear-gradient(100deg, 
                rgba(255, 255, 255, 0) 20%, 
                rgba(255, 255, 255, 0.25) 50%, 
                rgba(255, 255, 255, 0) 80%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .dark .shimmer {
            background: linear-gradient(100deg, 
                rgba(45, 55, 72, 0) 20%, 
                rgba(45, 55, 72, 0.25) 50%, 
                rgba(45, 55, 72, 0) 80%);
            background-size: 200% 100%;
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .bg-blur {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: #3b82f6;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 8px rgba(30, 64, 175, 0.3);
        }
        
        .dark input[type="range"]::-webkit-slider-thumb {
            border-color: #1e3a8a;
        }
        
        /* Recording animation */
        @keyframes recording-pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .recording-pulse {
            animation: recording-pulse 2s infinite;
        }
        
        /* Credit count badge animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(30, 64, 175, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 5px rgba(30, 64, 175, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(30, 64, 175, 0); }
        }
        
        .credit-pulse {
            animation: pulse-ring 2s infinite;
        }
        
        /* AI Robot Icon Styles */
        .ai-robot-icon {
            position: relative;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: ai-pulse 2s ease-in-out infinite, glow 3s ease-in-out infinite alternate;
        }
        
        .ai-robot-icon::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #3b82f6, #0ea5e9, #1e40af, #3b82f6);
            border-radius: 14px;
            z-index: -1;
            animation: rotate-slow 8s linear infinite;
        }
        
        .ai-robot-icon .robot-face {
            position: relative;
            width: 32px;
            height: 32px;
            color: white;
            font-size: 24px;
        }
        
        .ai-robot-icon .robot-eyes {
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
        }
        
        .ai-robot-icon .robot-eye {
            width: 4px;
            height: 4px;
            background: #60a5fa;
            border-radius: 50%;
            animation: ai-blink 3s ease-in-out infinite;
        }
        
        .ai-robot-icon .robot-mouth {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 2px;
            background: #60a5fa;
            border-radius: 1px;
            animation: ai-talk 2s ease-in-out infinite;
        }
        
        @keyframes ai-blink {
            0%, 90%, 100% { opacity: 1; transform: scaleY(1); }
            95% { opacity: 0.3; transform: scaleY(0.1); }
        }
        
        @keyframes ai-talk {
            0%, 50%, 100% { width: 12px; }
            25%, 75% { width: 8px; }
        }
        
        /* Loading state */
        .loading {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .error-state {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .dark .error-state {
            background-color: #1e1b1b;
        }
        
        /* Accessibility improvements */
        .focus-visible:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Skip to content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #1e40af;
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            z-index: 1000;
        }
        
        .skip-link:focus {
            top: 6px;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-200">
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">Ana içeriğe geç</a>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-dream-primary mr-3"></div>
            <span>Yükleniyor...</span>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 hidden animate-slideDown">
        <div class="flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span id="error-message">Bir hata oluştu</span>
            <button onclick="hideErrorToast()" class="ml-3 text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 hidden animate-slideDown">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="success-message">İşlem başarılı</span>
            <button onclick="hideSuccessToast()" class="ml-3 text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Container -->
    <div class="mx-auto max-w-6xl px-4 py-5">
        <!-- Header Component -->
        <header class="flex justify-between items-center mb-8" role="banner">
            <div class="flex items-center">
                <!-- Back Button -->
                <button id="back-button" 
                        class="mr-2 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-visible hidden"
                        aria-label="Geri dön">
                    <i class="fas fa-arrow-left" aria-hidden="true"></i>
                </button>
                
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="ai-robot-icon mr-3">
                        <div class="robot-face">
                            <i class="fas fa-robot" aria-hidden="true"></i>
                            <div class="robot-eyes">
                                <div class="robot-eye"></div>
                                <div class="robot-eye"></div>
                            </div>
                            <div class="robot-mouth"></div>
                        </div>
                    </div>
                    <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-dream-gradient dark:bg-dream-gradient-dark">
                        Dream<span class="font-light">Sync</span>
                    </h1>
                </div>
            </div>
            
            <!-- User Profile / Login Area -->
            <div id="login-area" class="flex items-center">
                <button id="login-button" 
                        class="ml-2 px-4 py-2 bg-dream-primary text-white rounded-lg transition-colors hover:bg-dream-primary/90 focus-visible"
                        aria-label="Giriş yap">
                    <i class="fas fa-sign-in-alt mr-2" aria-hidden="true"></i> Giriş Yap
                </button>
                <button id="register-button" 
                        class="ml-2 px-4 py-2 bg-white dark:bg-gray-800 text-dream-primary dark:text-dream-secondary border border-dream-primary dark:border-dream-secondary rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 focus-visible"
                        aria-label="Kayıt ol">
                    <i class="fas fa-user-plus mr-2" aria-hidden="true"></i> Kayıt Ol
                </button>
            </div>
            
            <!-- Logged In User Area -->
            <div id="user-area" class="hidden items-center">
                <div id="credit-counter" class="relative mr-4">
                    <div class="flex items-center px-3 py-1.5 bg-dream-primary/10 dark:bg-dream-primary/20 text-dream-primary dark:text-dream-secondary rounded-full"
                         aria-label="Kredi durumu">
                        <i class="fas fa-star mr-2" aria-hidden="true"></i>
                        <span id="credit-count">3</span> <span class="ml-1 text-xs">kredi</span>
                    </div>
                </div>
                <div class="relative group">
                    <button id="user-menu-button" 
                            class="flex items-center focus-visible"
                            aria-haspopup="true"
                            aria-expanded="false"
                            aria-label="Kullanıcı menüsü">
                        <div class="w-10 h-10 rounded-full bg-dream-gradient flex items-center justify-center text-white mr-2">
                            <span id="user-initial">K</span>
                        </div>
                        <span id="username-display" class="hidden md:inline-block">KullanıcıAdı</span>
                        <i class="fas fa-chevron-down ml-2 text-xs opacity-70" aria-hidden="true"></i>
                    </button>
                    
                    <div id="user-dropdown" 
                         class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 hidden animate-slideDown"
                         role="menu"
                         aria-labelledby="user-menu-button">
                        <div class="p-3 border-b border-gray-200 dark:border-gray-700">
                            <p id="dropdown-username" class="font-medium">KullanıcıAdı</p>
                            <p id="dropdown-email" class="text-xs text-gray-500 dark:text-gray-400">kullanici@mail.com</p>
                        </div>
                        <div>
                            <button id="account-btn" 
                                    class="w-full text-left flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-visible"
                                    role="menuitem">
                                <i class="fas fa-user text-gray-500 dark:text-gray-400 w-5" aria-hidden="true"></i>
                                <span class="ml-2">Hesabım</span>
                            </button>
                            <button id="credits-btn" 
                                    class="w-full text-left flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-visible"
                                    role="menuitem">
                                <i class="fas fa-star text-gray-500 dark:text-gray-400 w-5" aria-hidden="true"></i>
                                <span class="ml-2">Kredi Satın Al</span>
                            </button>
                            <button id="settings-btn" 
                                    class="w-full text-left flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-visible"
                                    role="menuitem">
                                <i class="fas fa-cog text-gray-500 dark:text-gray-400 w-5" aria-hidden="true"></i>
                                <span class="ml-2">Ayarlar</span>
                            </button>
                            <button id="theme-btn" 
                                    class="w-full text-left flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-visible"
                                    role="menuitem"
                                    aria-label="Tema değiştir">
                                <i class="fas fa-moon text-gray-500 dark:text-gray-400 w-5 dark:hidden" aria-hidden="true"></i>
                                <i class="fas fa-sun text-gray-500 dark:text-gray-400 w-5 hidden dark:block" aria-hidden="true"></i>
                                <span class="ml-2">Tema Değiştir</span>
                       
